<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="cell__viewer__server_8cpp" kind="file" language="C++">
    <compoundname>cell_viewer_server.cpp</compoundname>
    <includes local="yes">script/first_include.hpp</includes>
    <includes refid="cell__viewer__server_8hpp" local="yes">cell_viewer_server.hpp</includes>
    <includes refid="cell__viewer__connection_8hpp" local="yes">cell_viewer_connection.hpp</includes>
    <includes refid="cell_8hpp" local="yes">cell.hpp</includes>
    <includes refid="space_8hpp" local="yes">space.hpp</includes>
    <includes refid="cellapp_2entity_8hpp" local="yes">entity.hpp</includes>
    <includes local="yes">network/event_dispatcher.hpp</includes>
    <incdepgraph>
      <node id="7375">
        <label>chunk_loading/edge_geometry_mappings.hpp</label>
      </node>
      <node id="7345">
        <label>math/rectt.hpp</label>
      </node>
      <node id="7358">
        <label>functional</label>
      </node>
      <node id="7373">
        <label>scene/collision_scene_view.hpp</label>
      </node>
      <node id="7401">
        <label>entitydef_script/entity_method.hpp</label>
      </node>
      <node id="7381">
        <label>network/misc.hpp</label>
      </node>
      <node id="7352">
        <label>cstdmf/memory_stream.hpp</label>
      </node>
      <node id="7364">
        <label>float.h</label>
      </node>
      <node id="7335">
        <label>build/bwapi.hpp</label>
      </node>
      <node id="7376">
        <label>chunk_loading/geometry_mapper.hpp</label>
      </node>
      <node id="7337">
        <label>entitydef/volatile_info.hpp</label>
      </node>
      <node id="7363">
        <label>cstdmf/debug.hpp</label>
      </node>
      <node id="7362">
        <label>cstdmf/stdmf.hpp</label>
      </node>
      <node id="7329">
        <label>script/first_include.hpp</label>
      </node>
      <node id="7331">
        <label>network/endpoint.hpp</label>
      </node>
      <node id="7387">
        <label>script/script_object.hpp</label>
      </node>
      <node id="7382">
        <label>script/py_script_object.hpp</label>
      </node>
      <node id="7334">
        <label>cell.hpp</label>
        <link refid="cell_8hpp_source"/>
        <childnode refid="7335" relation="include">
        </childnode>
        <childnode refid="7336" relation="include">
        </childnode>
        <childnode refid="7342" relation="include">
        </childnode>
        <childnode refid="7348" relation="include">
        </childnode>
        <childnode refid="7350" relation="include">
        </childnode>
        <childnode refid="7351" relation="include">
        </childnode>
        <childnode refid="7352" relation="include">
        </childnode>
        <childnode refid="7346" relation="include">
        </childnode>
        <childnode refid="7353" relation="include">
        </childnode>
        <childnode refid="7354" relation="include">
        </childnode>
        <childnode refid="7355" relation="include">
        </childnode>
        <childnode refid="7340" relation="include">
        </childnode>
        <childnode refid="7356" relation="include">
        </childnode>
        <childnode refid="7357" relation="include">
        </childnode>
        <childnode refid="7358" relation="include">
        </childnode>
      </node>
      <node id="7359">
        <label>space.hpp</label>
        <link refid="space_8hpp_source"/>
        <childnode refid="7336" relation="include">
        </childnode>
        <childnode refid="7360" relation="include">
        </childnode>
        <childnode refid="7365" relation="include">
        </childnode>
        <childnode refid="7378" relation="include">
        </childnode>
        <childnode refid="7376" relation="include">
        </childnode>
        <childnode refid="7375" relation="include">
        </childnode>
        <childnode refid="7353" relation="include">
        </childnode>
        <childnode refid="7347" relation="include">
        </childnode>
        <childnode refid="7351" relation="include">
        </childnode>
        <childnode refid="7382" relation="include">
        </childnode>
        <childnode refid="7369" relation="include">
        </childnode>
      </node>
      <node id="7336">
        <label>cellapp_interface.hpp</label>
        <link refid="cellapp__interface_8hpp_source"/>
        <childnode refid="7337" relation="include">
        </childnode>
        <childnode refid="7338" relation="include">
        </childnode>
        <childnode refid="7339" relation="include">
        </childnode>
        <childnode refid="7340" relation="include">
        </childnode>
        <childnode refid="7341" relation="include">
        </childnode>
      </node>
      <node id="7372">
        <label>chunk/chunk_space.hpp</label>
      </node>
      <node id="7330">
        <label>cell_viewer_server.hpp</label>
        <link refid="cell__viewer__server_8hpp_source"/>
        <childnode refid="7331" relation="include">
        </childnode>
        <childnode refid="7332" relation="include">
        </childnode>
      </node>
      <node id="7390">
        <label>cstdmf/stringmap.hpp</label>
      </node>
      <node id="7344">
        <label>cstdmf/binary_stream.hpp</label>
      </node>
      <node id="7342">
        <label>cell_info.hpp</label>
        <link refid="cell__info_8hpp_source"/>
        <childnode refid="7343" relation="include">
        </childnode>
        <childnode refid="7346" relation="include">
        </childnode>
        <childnode refid="7347" relation="include">
        </childnode>
      </node>
      <node id="7360">
        <label>cell_range_list.hpp</label>
        <link refid="cell__range__list_8hpp_source"/>
        <childnode refid="7361" relation="include">
        </childnode>
      </node>
      <node id="7340">
        <label>server/common.hpp</label>
      </node>
      <node id="7388">
        <label>cstdmf/md5.hpp</label>
      </node>
      <node id="7370">
        <label>chunk_space_collision_provider.hpp</label>
        <link refid="chunk__space__collision__provider_8hpp_source"/>
        <childnode refid="7371" relation="include">
        </childnode>
        <childnode refid="7372" relation="include">
        </childnode>
        <childnode refid="7373" relation="include">
        </childnode>
        <childnode refid="7374" relation="include">
        </childnode>
      </node>
      <node id="7400">
        <label>entitydef/py_volatile_info.hpp</label>
      </node>
      <node id="7395">
        <label>entity_callback_buffer.hpp</label>
        <link refid="entity__callback__buffer_8hpp_source"/>
        <childnode refid="7371" relation="include">
        </childnode>
        <childnode refid="7351" relation="include">
        </childnode>
        <childnode refid="7387" relation="include">
        </childnode>
      </node>
      <node id="7369">
        <label>pyscript/script_math.hpp</label>
      </node>
      <node id="7348">
        <label>cell_profiler.hpp</label>
        <link refid="cell__profiler_8hpp_source"/>
        <childnode refid="7349" relation="include">
        </childnode>
      </node>
      <node id="7346">
        <label>cstdmf/smartpointer.hpp</label>
      </node>
      <node id="7403">
        <label>pyscript/script.hpp</label>
      </node>
      <node id="7379">
        <label>entitydef/data_description.hpp</label>
      </node>
      <node id="7350">
        <label>cstdmf/bw_string.hpp</label>
      </node>
      <node id="7354">
        <label>math/vector2.hpp</label>
      </node>
      <node id="7389">
        <label>entity_type.hpp</label>
        <link refid="cellapp_2entity__type_8hpp_source"/>
        <childnode refid="7384" relation="include">
        </childnode>
        <childnode refid="7350" relation="include">
        </childnode>
        <childnode refid="7390" relation="include">
        </childnode>
        <childnode refid="7391" relation="include">
        </childnode>
        <childnode refid="7392" relation="include">
        </childnode>
        <childnode refid="7393" relation="include">
        </childnode>
        <childnode refid="7347" relation="include">
        </childnode>
        <childnode refid="7394" relation="include">
        </childnode>
        <childnode refid="7335" relation="include">
        </childnode>
      </node>
      <node id="7396">
        <label>cstdmf/time_queue.hpp</label>
      </node>
      <node id="7398">
        <label>entitydef/property_event_stamps.hpp</label>
      </node>
      <node id="7367">
        <label>math/boundbox.hpp</label>
      </node>
      <node id="7355">
        <label>math/vector3.hpp</label>
      </node>
      <node id="7402">
        <label>physics2/worldtri.hpp</label>
      </node>
      <node id="7406">
        <label>cstdmf/bw_map.hpp</label>
      </node>
      <node id="7366">
        <label>physical_space.hpp</label>
        <link refid="physical__space_8hpp_source"/>
        <childnode refid="7345" relation="include">
        </childnode>
        <childnode refid="7367" relation="include">
        </childnode>
        <childnode refid="7346" relation="include">
        </childnode>
        <childnode refid="7368" relation="include">
        </childnode>
        <childnode refid="7369" relation="include">
        </childnode>
      </node>
      <node id="7405">
        <label>cstdmf/bw_set.hpp</label>
      </node>
      <node id="7361">
        <label>range_list_node.hpp</label>
        <link refid="range__list__node_8hpp_source"/>
        <childnode refid="7362" relation="include">
        </childnode>
        <childnode refid="7363" relation="include">
        </childnode>
        <childnode refid="7364" relation="include">
        </childnode>
        <childnode refid="7350" relation="include">
        </childnode>
        <childnode refid="7351" relation="include">
        </childnode>
      </node>
      <node id="7385">
        <label>pyscript/pyobject_plus.hpp</label>
      </node>
      <node id="7328">
        <label>cellapp/cell_viewer_server.cpp</label>
        <link refid="cell_viewer_server.cpp"/>
        <childnode refid="7329" relation="include">
        </childnode>
        <childnode refid="7330" relation="include">
        </childnode>
        <childnode refid="7333" relation="include">
        </childnode>
        <childnode refid="7334" relation="include">
        </childnode>
        <childnode refid="7359" relation="include">
        </childnode>
        <childnode refid="7383" relation="include">
        </childnode>
        <childnode refid="7407" relation="include">
        </childnode>
      </node>
      <node id="7349">
        <label>server/entity_profiler.hpp</label>
      </node>
      <node id="7384">
        <label>Python.h</label>
      </node>
      <node id="7378">
        <label>history_event.hpp</label>
        <link refid="history__event_8hpp_source"/>
        <childnode refid="7379" relation="include">
        </childnode>
        <childnode refid="7347" relation="include">
        </childnode>
        <childnode refid="7380" relation="include">
        </childnode>
        <childnode refid="7381" relation="include">
        </childnode>
        <childnode refid="7368" relation="include">
        </childnode>
        <childnode refid="7344" relation="include">
        </childnode>
      </node>
      <node id="7368">
        <label>cstdmf/bw_list.hpp</label>
      </node>
      <node id="7399">
        <label>entitydef/property_owner.hpp</label>
      </node>
      <node id="7333">
        <label>cell_viewer_connection.hpp</label>
        <link refid="cell__viewer__connection_8hpp_source"/>
        <childnode refid="7331" relation="include">
        </childnode>
        <childnode refid="7332" relation="include">
        </childnode>
      </node>
      <node id="7386">
        <label>controller.hpp</label>
        <link refid="controller_8hpp_source"/>
        <childnode refid="7384" relation="include">
        </childnode>
        <childnode refid="7347" relation="include">
        </childnode>
        <childnode refid="7344" relation="include">
        </childnode>
        <childnode refid="7346" relation="include">
        </childnode>
        <childnode refid="7387" relation="include">
        </childnode>
        <childnode refid="7388" relation="include">
        </childnode>
        <childnode refid="7335" relation="include">
        </childnode>
      </node>
      <node id="7394">
        <label>server/entity_type_profiler.hpp</label>
      </node>
      <node id="7393">
        <label>delegate_interface/entity_delegate.hpp</label>
      </node>
      <node id="7374">
        <label>scene/scene_provider.hpp</label>
      </node>
      <node id="7392">
        <label>entitydef/method_description.hpp</label>
      </node>
      <node id="7353">
        <label>math/math_extra.hpp</label>
      </node>
      <node id="7347">
        <label>network/basictypes.hpp</label>
      </node>
      <node id="7341">
        <label>server/anonymous_channel_client.hpp</label>
      </node>
      <node id="7332">
        <label>network/interfaces.hpp</label>
      </node>
      <node id="7357">
        <label>deque</label>
      </node>
      <node id="7391">
        <label>entitydef/entity_description.hpp</label>
      </node>
      <node id="7339">
        <label>network/msgtypes.hpp</label>
      </node>
      <node id="7371">
        <label>cstdmf/bw_namespace.hpp</label>
      </node>
      <node id="7404">
        <label>server/backup_hash.hpp</label>
      </node>
      <node id="7351">
        <label>cstdmf/bw_vector.hpp</label>
      </node>
      <node id="7338">
        <label>network/common_interface_macros.hpp</label>
      </node>
      <node id="7356">
        <label>algorithm</label>
      </node>
      <node id="7407">
        <label>network/event_dispatcher.hpp</label>
      </node>
      <node id="7383">
        <label>entity.hpp</label>
        <link refid="cellapp_2entity_8hpp_source"/>
        <childnode refid="7384" relation="include">
        </childnode>
        <childnode refid="7385" relation="include">
        </childnode>
        <childnode refid="7335" relation="include">
        </childnode>
        <childnode refid="7336" relation="include">
        </childnode>
        <childnode refid="7386" relation="include">
        </childnode>
        <childnode refid="7389" relation="include">
        </childnode>
        <childnode refid="7378" relation="include">
        </childnode>
        <childnode refid="7395" relation="include">
        </childnode>
        <childnode refid="7352" relation="include">
        </childnode>
        <childnode refid="7396" relation="include">
        </childnode>
        <childnode refid="7397" relation="include">
        </childnode>
        <childnode refid="7398" relation="include">
        </childnode>
        <childnode refid="7399" relation="include">
        </childnode>
        <childnode refid="7400" relation="include">
        </childnode>
        <childnode refid="7401" relation="include">
        </childnode>
        <childnode refid="7393" relation="include">
        </childnode>
        <childnode refid="7402" relation="include">
        </childnode>
        <childnode refid="7403" relation="include">
        </childnode>
        <childnode refid="7404" relation="include">
        </childnode>
        <childnode refid="7349" relation="include">
        </childnode>
        <childnode refid="7405" relation="include">
        </childnode>
        <childnode refid="7351" relation="include">
        </childnode>
        <childnode refid="7406" relation="include">
        </childnode>
      </node>
      <node id="7365">
        <label>physical_chunk_space.hpp</label>
        <link refid="physical__chunk__space_8hpp_source"/>
        <childnode refid="7366" relation="include">
        </childnode>
        <childnode refid="7370" relation="include">
        </childnode>
        <childnode refid="7347" relation="include">
        </childnode>
        <childnode refid="7371" relation="include">
        </childnode>
        <childnode refid="7372" relation="include">
        </childnode>
        <childnode refid="7375" relation="include">
        </childnode>
        <childnode refid="7376" relation="include">
        </childnode>
        <childnode refid="7377" relation="include">
        </childnode>
        <childnode refid="7369" relation="include">
        </childnode>
      </node>
      <node id="7380">
        <label>network/interface_element.hpp</label>
      </node>
      <node id="7343">
        <label>space_node.hpp</label>
        <link refid="space__node_8hpp_source"/>
        <childnode refid="7344" relation="include">
        </childnode>
        <childnode refid="7345" relation="include">
        </childnode>
      </node>
      <node id="7377">
        <label>scene/scene.hpp</label>
      </node>
      <node id="7397">
        <label>entitydef/mailbox_base.hpp</label>
      </node>
    </incdepgraph>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para>This file implements the <ref refid="class_cell_viewer_server" kindref="compound">CellViewerServer</ref> class. </para>    </detaileddescription>
    <programlisting>
<codeline lineno="1"></codeline>
<codeline lineno="8"><highlight class="preprocessor">#include<sp/>&quot;script/first_include.hpp&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>http://docs.python.org/api/includes.html</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cell_viewer_server.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cell_viewer_connection.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cell.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;space.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;entity.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;network/event_dispatcher.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal">DECLARE_DEBUG_COMPONENT(0)</highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"><ref refid="namespace_b_w___b_e_g_i_n___n_a_m_e_s_p_a_c_e" kindref="compound">BW_BEGIN_NAMESPACE</ref></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><ref refid="class_cell_viewer_server" kindref="compound">CellViewerServer</ref>::<ref refid="class_cell_viewer_server" kindref="compound">CellViewerServer</ref>(<sp/>const<sp/><ref refid="class_cell_app" kindref="compound">CellApp</ref><sp/>&amp;<sp/>cellApp<sp/>)<sp/>:</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/>pDispatcher_(<sp/>NULL<sp/>),<sp/>cellApp_(<sp/>cellApp<sp/>)</highlight></codeline>
<codeline lineno="34"><highlight class="normal">{</highlight></codeline>
<codeline lineno="35"><highlight class="normal">}</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><ref refid="class_cell_viewer_server_1a5e43b9e55624feae1e513e7f725b80c3" kindref="member">CellViewerServer::~CellViewerServer</ref>()</highlight></codeline>
<codeline lineno="44"><highlight class="normal">{</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;<ref refid="class_cell_viewer_server_1a93e9f54e50bcbb6c19b4b70d9aeedc23" kindref="member">shutDown</ref>();</highlight></codeline>
<codeline lineno="46"><highlight class="normal">}</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_cell_viewer_server_1ab54f25178bff9c3ccd540263ef13c79e" kindref="member">CellViewerServer::startup</ref>(<sp/>Mercury::EventDispatcher<sp/>&amp;<sp/>dispatcher,</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint16<sp/><ref refid="class_cell_viewer_server_1a2f78b1fc53e05fb288cde1e2791a5386" kindref="member">port</ref><sp/>)</highlight></codeline>
<codeline lineno="56"><highlight class="normal">{</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/>pDispatcher_<sp/>=<sp/>&amp;dispatcher;</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/>listener_.socket(SOCK_STREAM);</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>listener_.setnonblocking(</highlight><highlight class="keyword">true</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>val<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/>setsockopt(<sp/>listener_.fileno(),<sp/>SOL_SOCKET,<sp/>SO_REUSEADDR,</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*)&amp;val,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(val)<sp/>);</highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(listener_.bind(htons(port))<sp/>==<sp/>-1)</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(listener_.bind(0)<sp/>==<sp/>-1)</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WARNING_MSG(<sp/></highlight><highlight class="stringliteral">&quot;CellViewerServer::startup:<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Failed<sp/>to<sp/>bind<sp/>to<sp/>port<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>port<sp/>);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;<ref refid="class_cell_viewer_server_1a93e9f54e50bcbb6c19b4b70d9aeedc23" kindref="member">shutDown</ref>();</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>listener_.getlocaladdress(&amp;port,<sp/>NULL);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>port<sp/>=<sp/>ntohs(port);</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/>listen(listener_.fileno(),<sp/>1);</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/>pDispatcher_-&gt;registerFileDescriptor(<sp/>listener_.fileno(),<sp/></highlight><highlight class="keyword">this</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;CellViewerServer&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>INFO_MSG(<sp/>&quot;CellViewerServer::startup:<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>&quot;Viewer<sp/>Cell<sp/>Server<sp/>is<sp/>running<sp/>on<sp/>port<sp/>%d\n&quot;,<sp/>port<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="88"><highlight class="normal">}</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_cell_viewer_server_1a93e9f54e50bcbb6c19b4b70d9aeedc23" kindref="member">CellViewerServer::shutDown</ref>()</highlight></codeline>
<codeline lineno="96"><highlight class="normal">{</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>BW::vector&lt;CellViewerConnection<sp/>*&gt;::iterator<sp/>it;</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Disconnect<sp/>all<sp/>connections,<sp/>and<sp/>clear<sp/>our<sp/>connection<sp/>list.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(it<sp/>=<sp/>connections_.begin();<sp/>it<sp/>!=<sp/>connections_.end();<sp/>it++)</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>*it;</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/>connections_.clear();</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Shut<sp/>down<sp/>the<sp/>listener<sp/>socket<sp/>if<sp/>it<sp/>is<sp/>open.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(listener_.good())</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>MF_ASSERT(pDispatcher_<sp/>!=<sp/>NULL);</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pDispatcher_-&gt;deregisterFileDescriptor(<sp/>listener_.fileno()<sp/>);</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>listener_.close();</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>pDispatcher_<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="118"><highlight class="normal">}</highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>CellViewerServer::handleInputNotification(<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>fd<sp/>)</highlight></codeline>
<codeline lineno="125"><highlight class="normal">{</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/>(void)fd;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>MF_ASSERT(fd<sp/>==<sp/>listener_.fileno());</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/>sockaddr_in<sp/>addr;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>socklen_t<sp/>size<sp/>=<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(addr);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/>socket_t<sp/>socket<sp/>=<sp/>accept(<sp/>listener_.fileno(),<sp/>(sockaddr<sp/>*)&amp;addr,<sp/>&amp;size<sp/>);</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(socket<sp/>==<sp/>-1)</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>TRACE_MSG(</highlight><highlight class="stringliteral">&quot;CellViewerServer:<sp/>Failed<sp/>to<sp/>accept<sp/>connection:<sp/>%d\n&quot;</highlight><highlight class="normal">,<sp/>errno);</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>This<sp/>object<sp/>deletes<sp/>itself<sp/>when<sp/>the<sp/>connection<sp/>is<sp/>closed.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_cell_viewer_connection" kindref="compound">CellViewerConnection</ref>(<sp/>*pDispatcher_,<sp/>socket,<sp/>cellApp_<sp/>);</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1;</highlight></codeline>
<codeline lineno="144"><highlight class="normal">}</highlight></codeline>
<codeline lineno="145"><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal">uint16<sp/><ref refid="class_cell_viewer_server_1a2f78b1fc53e05fb288cde1e2791a5386" kindref="member">CellViewerServer::port</ref>()</highlight><highlight class="keyword"><sp/>const</highlight></codeline>
<codeline lineno="150"><highlight class="keyword"></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>uint16<sp/>port<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/>listener_.getlocaladdress(&amp;port,<sp/>NULL);</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/>port<sp/>=<sp/>ntohs(port);</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_cell_viewer_server_1a2f78b1fc53e05fb288cde1e2791a5386" kindref="member">port</ref>;</highlight></codeline>
<codeline lineno="155"><highlight class="normal">}</highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal">BW_END_NAMESPACE</highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"></highlight><highlight class="comment">//<sp/>cell_viewer_server.cpp<sp/></highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="cellapp/cell_viewer_server.cpp"/>
  </compounddef>
</doxygen>
