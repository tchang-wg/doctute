<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="cell__chunk_8cpp" kind="file" language="C++">
    <compoundname>cell_chunk.cpp</compoundname>
    <includes local="yes">script/first_include.hpp</includes>
    <includes local="yes">server/util.hpp</includes>
    <includes refid="cell__chunk_8hpp" local="yes">cell_chunk.hpp</includes>
    <includes refid="cellapp_2entity_8hpp" local="yes">entity.hpp</includes>
    <incdepgraph>
      <node id="7100">
        <label>entitydef_script/entity_method.hpp</label>
      </node>
      <node id="7089">
        <label>network/misc.hpp</label>
      </node>
      <node id="7094">
        <label>cstdmf/memory_stream.hpp</label>
      </node>
      <node id="7062">
        <label>chunk/chunk_cache.hpp</label>
      </node>
      <node id="7066">
        <label>build/bwapi.hpp</label>
      </node>
      <node id="7068">
        <label>entitydef/volatile_info.hpp</label>
      </node>
      <node id="7058">
        <label>script/first_include.hpp</label>
      </node>
      <node id="7077">
        <label>script/script_object.hpp</label>
      </node>
      <node id="7067">
        <label>cellapp_interface.hpp</label>
        <link refid="cellapp__interface_8hpp_source"/>
        <childnode refid="7068" relation="include">
        </childnode>
        <childnode refid="7069" relation="include">
        </childnode>
        <childnode refid="7070" relation="include">
        </childnode>
        <childnode refid="7071" relation="include">
        </childnode>
        <childnode refid="7072" relation="include">
        </childnode>
      </node>
      <node id="7081">
        <label>cstdmf/stringmap.hpp</label>
      </node>
      <node id="7075">
        <label>cstdmf/binary_stream.hpp</label>
      </node>
      <node id="7071">
        <label>server/common.hpp</label>
      </node>
      <node id="7078">
        <label>cstdmf/md5.hpp</label>
      </node>
      <node id="7099">
        <label>entitydef/py_volatile_info.hpp</label>
      </node>
      <node id="7091">
        <label>entity_callback_buffer.hpp</label>
        <link refid="entity__callback__buffer_8hpp_source"/>
        <childnode refid="7092" relation="include">
        </childnode>
        <childnode refid="7093" relation="include">
        </childnode>
        <childnode refid="7077" relation="include">
        </childnode>
      </node>
      <node id="7059">
        <label>server/util.hpp</label>
      </node>
      <node id="7076">
        <label>cstdmf/smartpointer.hpp</label>
      </node>
      <node id="7102">
        <label>pyscript/script.hpp</label>
      </node>
      <node id="7087">
        <label>entitydef/data_description.hpp</label>
      </node>
      <node id="7080">
        <label>cstdmf/bw_string.hpp</label>
      </node>
      <node id="7079">
        <label>entity_type.hpp</label>
        <link refid="cellapp_2entity__type_8hpp_source"/>
        <childnode refid="7064" relation="include">
        </childnode>
        <childnode refid="7080" relation="include">
        </childnode>
        <childnode refid="7081" relation="include">
        </childnode>
        <childnode refid="7082" relation="include">
        </childnode>
        <childnode refid="7083" relation="include">
        </childnode>
        <childnode refid="7084" relation="include">
        </childnode>
        <childnode refid="7074" relation="include">
        </childnode>
        <childnode refid="7085" relation="include">
        </childnode>
        <childnode refid="7066" relation="include">
        </childnode>
      </node>
      <node id="7057">
        <label>cellapp/cell_chunk.cpp</label>
        <link refid="cell_chunk.cpp"/>
        <childnode refid="7058" relation="include">
        </childnode>
        <childnode refid="7059" relation="include">
        </childnode>
        <childnode refid="7060" relation="include">
        </childnode>
        <childnode refid="7063" relation="include">
        </childnode>
      </node>
      <node id="7095">
        <label>cstdmf/time_queue.hpp</label>
      </node>
      <node id="7097">
        <label>entitydef/property_event_stamps.hpp</label>
      </node>
      <node id="7101">
        <label>physics2/worldtri.hpp</label>
      </node>
      <node id="7106">
        <label>cstdmf/bw_map.hpp</label>
      </node>
      <node id="7105">
        <label>cstdmf/bw_set.hpp</label>
      </node>
      <node id="7065">
        <label>pyscript/pyobject_plus.hpp</label>
      </node>
      <node id="7104">
        <label>server/entity_profiler.hpp</label>
      </node>
      <node id="7064">
        <label>Python.h</label>
      </node>
      <node id="7086">
        <label>history_event.hpp</label>
        <link refid="history__event_8hpp_source"/>
        <childnode refid="7087" relation="include">
        </childnode>
        <childnode refid="7074" relation="include">
        </childnode>
        <childnode refid="7088" relation="include">
        </childnode>
        <childnode refid="7089" relation="include">
        </childnode>
        <childnode refid="7090" relation="include">
        </childnode>
        <childnode refid="7075" relation="include">
        </childnode>
      </node>
      <node id="7090">
        <label>cstdmf/bw_list.hpp</label>
      </node>
      <node id="7098">
        <label>entitydef/property_owner.hpp</label>
      </node>
      <node id="7073">
        <label>controller.hpp</label>
        <link refid="controller_8hpp_source"/>
        <childnode refid="7064" relation="include">
        </childnode>
        <childnode refid="7074" relation="include">
        </childnode>
        <childnode refid="7075" relation="include">
        </childnode>
        <childnode refid="7076" relation="include">
        </childnode>
        <childnode refid="7077" relation="include">
        </childnode>
        <childnode refid="7078" relation="include">
        </childnode>
        <childnode refid="7066" relation="include">
        </childnode>
      </node>
      <node id="7085">
        <label>server/entity_type_profiler.hpp</label>
      </node>
      <node id="7084">
        <label>delegate_interface/entity_delegate.hpp</label>
      </node>
      <node id="7060">
        <label>cell_chunk.hpp</label>
        <link refid="cell__chunk_8hpp_source"/>
        <childnode refid="7061" relation="include">
        </childnode>
        <childnode refid="7062" relation="include">
        </childnode>
      </node>
      <node id="7061">
        <label>chunk/chunk.hpp</label>
      </node>
      <node id="7083">
        <label>entitydef/method_description.hpp</label>
      </node>
      <node id="7074">
        <label>network/basictypes.hpp</label>
      </node>
      <node id="7072">
        <label>server/anonymous_channel_client.hpp</label>
      </node>
      <node id="7082">
        <label>entitydef/entity_description.hpp</label>
      </node>
      <node id="7070">
        <label>network/msgtypes.hpp</label>
      </node>
      <node id="7092">
        <label>cstdmf/bw_namespace.hpp</label>
      </node>
      <node id="7103">
        <label>server/backup_hash.hpp</label>
      </node>
      <node id="7093">
        <label>cstdmf/bw_vector.hpp</label>
      </node>
      <node id="7069">
        <label>network/common_interface_macros.hpp</label>
      </node>
      <node id="7063">
        <label>entity.hpp</label>
        <link refid="cellapp_2entity_8hpp_source"/>
        <childnode refid="7064" relation="include">
        </childnode>
        <childnode refid="7065" relation="include">
        </childnode>
        <childnode refid="7066" relation="include">
        </childnode>
        <childnode refid="7067" relation="include">
        </childnode>
        <childnode refid="7073" relation="include">
        </childnode>
        <childnode refid="7079" relation="include">
        </childnode>
        <childnode refid="7086" relation="include">
        </childnode>
        <childnode refid="7091" relation="include">
        </childnode>
        <childnode refid="7094" relation="include">
        </childnode>
        <childnode refid="7095" relation="include">
        </childnode>
        <childnode refid="7096" relation="include">
        </childnode>
        <childnode refid="7097" relation="include">
        </childnode>
        <childnode refid="7098" relation="include">
        </childnode>
        <childnode refid="7099" relation="include">
        </childnode>
        <childnode refid="7100" relation="include">
        </childnode>
        <childnode refid="7084" relation="include">
        </childnode>
        <childnode refid="7101" relation="include">
        </childnode>
        <childnode refid="7102" relation="include">
        </childnode>
        <childnode refid="7103" relation="include">
        </childnode>
        <childnode refid="7104" relation="include">
        </childnode>
        <childnode refid="7105" relation="include">
        </childnode>
        <childnode refid="7093" relation="include">
        </childnode>
        <childnode refid="7106" relation="include">
        </childnode>
      </node>
      <node id="7088">
        <label>network/interface_element.hpp</label>
      </node>
      <node id="7096">
        <label>entitydef/mailbox_base.hpp</label>
      </node>
    </incdepgraph>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;script/first_include.hpp&quot;</highlight><highlight class="normal"><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>See<sp/>http://docs.python.org/api/includes.html</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;server/util.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cell_chunk.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;entity.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"><ref refid="namespace_b_w___b_e_g_i_n___n_a_m_e_s_p_a_c_e" kindref="compound">BW_BEGIN_NAMESPACE</ref></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="comment">//<sp/>-----------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Section:<sp/>CellChunk</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="comment">//<sp/>-----------------------------------------------------------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="17"><highlight class="normal"><ref refid="class_cell_chunk_1a4ce3309dd23fc5d42f7ee9ea985ecc41" kindref="member">CellChunk::CellChunk</ref>(<sp/>Chunk<sp/>&amp;<sp/>chunk<sp/>)<sp/>:</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/>chunk_(<sp/>chunk<sp/>),</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/>pFirstEntity_(<sp/>NULL<sp/>),</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/>pLastEntity_(<sp/>NULL<sp/>)</highlight></codeline>
<codeline lineno="21"><highlight class="normal">{</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/>chunk_.nextMark();</highlight></codeline>
<codeline lineno="23"><highlight class="normal">}</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"><ref refid="class_cell_chunk_1ab03f5eb538fd58a9d6a199d64d9e4cf2" kindref="member">CellChunk::~CellChunk</ref>()</highlight></codeline>
<codeline lineno="29"><highlight class="normal">{</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;clearAllEntities();</highlight></codeline>
<codeline lineno="31"><highlight class="normal">}</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_cell_chunk_1a40a28346e70a4c8315bb7100cc8e3a68" kindref="member">CellChunk::bind</ref>(<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>isUnbind<sp/>)</highlight></codeline>
<codeline lineno="39"><highlight class="normal">{</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;clearAllEntities();</highlight></codeline>
<codeline lineno="41"><highlight class="normal">}</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_cell_chunk_1aabf734b1531d4f94b22a578ced19a457" kindref="member">CellChunk::addEntity</ref>(<sp/><ref refid="class_entity" kindref="compound">Entity</ref><sp/>*<sp/>pEntity<sp/>)</highlight></codeline>
<codeline lineno="48"><highlight class="normal">{</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/>MF_ASSERT(<sp/>pEntity-&gt;prevInChunk()<sp/>==<sp/>NULL<sp/>);</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/>MF_ASSERT(<sp/>pEntity-&gt;nextInChunk()<sp/>==<sp/>NULL<sp/>);</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>MF_ASSERT(<sp/>!pEntity-&gt;isDestroyed()<sp/>);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/>MF_ASSERT(<sp/>!pEntity-&gt;inDestroy()<sp/>);</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pFirstEntity_<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pFirstEntity_<sp/>=<sp/>pEntity;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pLastEntity_<sp/><sp/>=<sp/>pFirstEntity_;</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pFirstEntity_-&gt;prevInChunk(<sp/>pEntity<sp/>);</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pEntity-&gt;nextInChunk(<sp/>pFirstEntity_<sp/>);</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pFirstEntity_<sp/>=<sp/>pEntity;</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="65"><highlight class="normal">}</highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_cell_chunk_1ab6eae24d90f6a58f975222bf00ec793f" kindref="member">CellChunk::removeEntity</ref>(<sp/><ref refid="class_entity" kindref="compound">Entity</ref>*<sp/>pEntity<sp/>)</highlight></codeline>
<codeline lineno="72"><highlight class="normal">{</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_entity" kindref="compound">Entity</ref>*<sp/>pPrev<sp/>=<sp/>pEntity-&gt;prevInChunk();</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_entity" kindref="compound">Entity</ref>*<sp/>pNext<sp/>=<sp/>pEntity-&gt;nextInChunk();</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<sp/>pPrev<sp/>!=<sp/>NULL<sp/>)</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pPrev-&gt;nextInChunk(pNext);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pFirstEntity_<sp/>=<sp/>pNext;</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pNext<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pNext-&gt;prevInChunk(pPrev);</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pLastEntity_<sp/>=<sp/>pPrev;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/>pEntity-&gt;removedFromChunk();</highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>MF_ASSERT(pEntity-&gt;prevInChunk()<sp/>==<sp/>NULL);</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>MF_ASSERT(pEntity-&gt;nextInChunk()<sp/>==<sp/>NULL);</highlight></codeline>
<codeline lineno="90"><highlight class="normal">}</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>CellChunk::clearAllEntities()</highlight></codeline>
<codeline lineno="97"><highlight class="normal">{</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>clear<sp/>all<sp/>entities</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_entity" kindref="compound">Entity</ref><sp/>*<sp/>pNext=<sp/>pFirstEntity_;</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight><highlight class="comment">//<sp/><sp/>for<sp/>(EntityIterator<sp/>it<sp/>=<sp/>this-&gt;begin();<sp/>it<sp/>!=<sp/>this-&gt;end();<sp/>it++)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<ref refid="class_entity" kindref="compound">Entity</ref><sp/>*<sp/>pEntity<sp/>=<sp/>pNext;<sp/>pEntity<sp/>!=<sp/>NULL;<sp/>pEntity<sp/>=<sp/>pNext)</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pNext<sp/>=<sp/>pEntity-&gt;nextInChunk();</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pEntity-&gt;removedFromChunk();</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//(*it)-&gt;prevInChunk(<sp/>NULL<sp/>);<sp/><sp/><sp/>//<sp/>duh...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//(*it)-&gt;nextInChunk(<sp/>NULL<sp/>);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/>pFirstEntity_<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/>pLastEntity_<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="110"><highlight class="normal">}</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight><highlight class="comment">//<sp/>static<sp/>instance<sp/>initialiser</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal">CellChunk::Instance&lt;CellChunk&gt;<sp/>CellChunk::instance;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_cell_chunk_1a21864ea1b23501af0d2c26b6af34ee2d" kindref="member">CellChunk::propagateNoise</ref>(<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="class_entity" kindref="compound">Entity</ref>*<sp/>who,</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>propagationRange,</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3<sp/>position,</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>remainingRange,</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>event,</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>info,</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uint32<sp/>mark<sp/>)</highlight></codeline>
<codeline lineno="126"><highlight class="normal">{</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mark<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mark<sp/>=<sp/>chunk_.nextMark();</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>chunk_.traverseMark(<sp/>mark<sp/>);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(mark<sp/>==<sp/>chunk_.traverseMark())</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>chunk_.traverseMark(<sp/>mark<sp/>);</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="140"><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(EntityIterator<sp/>iter<sp/>=<sp/>this-&gt;begin();<sp/>iter<sp/>!=<sp/>this-&gt;end();<sp/>iter++)</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_entity" kindref="compound">Entity</ref><sp/>*<sp/>pEntity<sp/>=<sp/>*iter;</highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pEntity<sp/>!=<sp/>who)</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dist<sp/>=<sp/>(float)sqrt(<sp/>ServerUtil::distSqrBetween(</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>position,<sp/>pEntity-&gt;position()<sp/>)<sp/>);</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dist<sp/>&lt;<sp/>remainingRange)</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>travelDist<sp/>=<sp/>(propagationRange<sp/>-<sp/>remainingRange)<sp/>+<sp/>dist;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pEntity-&gt;heardNoise(<sp/>who,<sp/>propagationRange,<sp/>travelDist,</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>event,<sp/>info<sp/>);</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="157"><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(Chunk::piterator<sp/>it<sp/>=<sp/>chunk_.pbegin();<sp/>it<sp/>!=<sp/>chunk_.pend();<sp/>it++)</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ChunkBoundary::Portal<sp/>portal<sp/>=<sp/>*it;</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!portal.hasChunk()<sp/>||<sp/>!portal.permissive)</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_cell_chunk" kindref="compound">CellChunk</ref><sp/>&amp;<sp/>neighbour<sp/>=<sp/>CellChunk::instance(<sp/>*portal.pChunk<sp/>);</highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TODO:<sp/>for<sp/>outside<sp/>chunks,<sp/>we<sp/>should<sp/>use<sp/>closest<sp/>point<sp/>on<sp/>the<sp/>portal</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector3<sp/>newPosition<sp/>=<sp/>portal.centre;</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dist<sp/>=<sp/>ServerUtil::distSqrBetween(position,<sp/>newPosition);</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>distanceLeft<sp/>=<sp/>(float)(remainingRange<sp/>-<sp/>sqrt(dist));</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(distanceLeft<sp/>&gt;<sp/>0.f)</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>neighbour.<ref refid="class_cell_chunk_1a21864ea1b23501af0d2c26b6af34ee2d" kindref="member">propagateNoise</ref>(<sp/>who,<sp/>propagationRange,<sp/>newPosition,</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>distanceLeft,<sp/>event,<sp/>info,<sp/>mark);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="176"><highlight class="normal">}</highlight></codeline>
<codeline lineno="177"><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_cell_chunk_1_1_entity_iterator_1ae54edc6e015b3460d1bba09c3b31fc5e" kindref="member">CellChunk::EntityIterator::operator++</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="183"><highlight class="normal">{</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/>pEntity_<sp/>=<sp/>pEntity_-&gt;nextInChunk();</highlight></codeline>
<codeline lineno="185"><highlight class="normal">}</highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal">BW_END_NAMESPACE</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight><highlight class="comment">//<sp/>cell_chunk.cpp</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="cellapp/cell_chunk.cpp"/>
  </compounddef>
</doxygen>
