<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.11">
  <compounddef id="wrapped__message__handler_8cpp" kind="file" language="C++">
    <compoundname>wrapped_message_handler.cpp</compoundname>
    <includes refid="wrapped__message__handler_8hpp" local="yes">wrapped_message_handler.hpp</includes>
    <includes refid="bwmachined_8hpp" local="yes">bwmachined.hpp</includes>
    <includes refid="ring__broadcast__manager_8hpp" local="yes">ring_broadcast_manager.hpp</includes>
    <includes local="yes">network/basictypes.hpp</includes>
    <includes local="yes">network/network_utils.hpp</includes>
    <incdepgraph>
      <node id="18508">
        <label>stdarg.h</label>
      </node>
      <node id="18498">
        <label>network_node.hpp</label>
        <link refid="network__node_8hpp_source"/>
        <childnode refid="18473" relation="include">
        </childnode>
        <childnode refid="18474" relation="include">
        </childnode>
        <childnode refid="18499" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18479" relation="include">
        </childnode>
        <childnode refid="18494" relation="include">
        </childnode>
        <childnode refid="18477" relation="include">
        </childnode>
      </node>
      <node id="18510">
        <label>cstdmf/singleton.hpp</label>
      </node>
      <node id="18477">
        <label>cstdmf/memory_stream.hpp</label>
      </node>
      <node id="18506">
        <label>cstdmf/log_meta_data.hpp</label>
      </node>
      <node id="18512">
        <label>ring_broadcast_manager.hpp</label>
        <link refid="ring__broadcast__manager_8hpp_source"/>
        <childnode refid="18473" relation="include">
        </childnode>
        <childnode refid="18513" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18479" relation="include">
        </childnode>
        <childnode refid="18481" relation="include">
        </childnode>
      </node>
      <node id="18501">
        <label>tcp_connection_wrapper.hpp</label>
        <link refid="tcp__connection__wrapper_8hpp_source"/>
        <childnode refid="18474" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18502" relation="include">
        </childnode>
        <childnode refid="18493" relation="include">
        </childnode>
        <childnode refid="18476" relation="include">
        </childnode>
        <childnode refid="18477" relation="include">
        </childnode>
      </node>
      <node id="18490">
        <label>cstdmf/stdmf.hpp</label>
      </node>
      <node id="18475">
        <label>network/endpoint.hpp</label>
      </node>
      <node id="18471">
        <label>tools/bwmachined/wrapped_message_handler.cpp</label>
        <link refid="wrapped_message_handler.cpp"/>
        <childnode refid="18472" relation="include">
        </childnode>
        <childnode refid="18482" relation="include">
        </childnode>
        <childnode refid="18512" relation="include">
        </childnode>
        <childnode refid="18516" relation="include">
        </childnode>
        <childnode refid="18517" relation="include">
        </childnode>
      </node>
      <node id="18479">
        <label>network/machine_guard.hpp</label>
      </node>
      <node id="18476">
        <label>cstdmf/binary_stream.hpp</label>
      </node>
      <node id="18507">
        <label>cstdmf/debug_message_callbacks.hpp</label>
      </node>
      <node id="18517">
        <label>network/network_utils.hpp</label>
      </node>
      <node id="18500">
        <label>udp_connection_wrapper.hpp</label>
        <link refid="udp__connection__wrapper_8hpp_source"/>
        <childnode refid="18474" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18476" relation="include">
        </childnode>
        <childnode refid="18477" relation="include">
        </childnode>
      </node>
      <node id="18478">
        <label>cstdmf/smartpointer.hpp</label>
      </node>
      <node id="18486">
        <label>cstdmf/bw_string.hpp</label>
      </node>
      <node id="18499">
        <label>connection_wrapper_mgr.hpp</label>
        <link refid="connection__wrapper__mgr_8hpp_source"/>
        <childnode refid="18474" relation="include">
        </childnode>
        <childnode refid="18500" relation="include">
        </childnode>
        <childnode refid="18501" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18502" relation="include">
        </childnode>
        <childnode refid="18493" relation="include">
        </childnode>
      </node>
      <node id="18504">
        <label>cstdmf/debug_message_priority.hpp</label>
      </node>
      <node id="18487">
        <label>usermap.hpp</label>
        <link refid="usermap_8hpp_source"/>
        <childnode refid="18479" relation="include">
        </childnode>
      </node>
      <node id="18481">
        <label>cstdmf/time_queue.hpp</label>
      </node>
      <node id="18513">
        <label>ring_network_node.hpp</label>
        <link refid="ring__network__node_8hpp_source"/>
        <childnode refid="18498" relation="include">
        </childnode>
        <childnode refid="18473" relation="include">
        </childnode>
        <childnode refid="18474" relation="include">
        </childnode>
        <childnode refid="18514" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18479" relation="include">
        </childnode>
      </node>
      <node id="18491">
        <label>cstdmf/bw_set.hpp</label>
      </node>
      <node id="18505">
        <label>cstdmf/debug_message_source.hpp</label>
      </node>
      <node id="18495">
        <label>sys/types.h</label>
      </node>
      <node id="18474">
        <label>connection_wrapper.hpp</label>
        <link refid="connection__wrapper_8hpp_source"/>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18476" relation="include">
        </childnode>
        <childnode refid="18477" relation="include">
        </childnode>
        <childnode refid="18478" relation="include">
        </childnode>
      </node>
      <node id="18503">
        <label>syslog_message_handler.hpp</label>
        <link refid="syslog__message__handler_8hpp_source"/>
        <childnode refid="18489" relation="include">
        </childnode>
        <childnode refid="18504" relation="include">
        </childnode>
        <childnode refid="18505" relation="include">
        </childnode>
        <childnode refid="18506" relation="include">
        </childnode>
        <childnode refid="18507" relation="include">
        </childnode>
        <childnode refid="18508" relation="include">
        </childnode>
      </node>
      <node id="18480">
        <label>cstdmf/bw_list.hpp</label>
      </node>
      <node id="18494">
        <label>network/portmap.hpp</label>
      </node>
      <node id="18515">
        <label>cstdmf/timestamp.hpp</label>
      </node>
      <node id="18516">
        <label>network/basictypes.hpp</label>
      </node>
      <node id="18482">
        <label>bwmachined.hpp</label>
        <link refid="bwmachined_8hpp_source"/>
        <childnode refid="18473" relation="include">
        </childnode>
        <childnode refid="18474" relation="include">
        </childnode>
        <childnode refid="18483" relation="include">
        </childnode>
        <childnode refid="18496" relation="include">
        </childnode>
        <childnode refid="18497" relation="include">
        </childnode>
        <childnode refid="18498" relation="include">
        </childnode>
        <childnode refid="18484" relation="include">
        </childnode>
        <childnode refid="18503" relation="include">
        </childnode>
        <childnode refid="18487" relation="include">
        </childnode>
        <childnode refid="18472" relation="include">
        </childnode>
        <childnode refid="18509" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18502" relation="include">
        </childnode>
        <childnode refid="18493" relation="include">
        </childnode>
        <childnode refid="18476" relation="include">
        </childnode>
        <childnode refid="18510" relation="include">
        </childnode>
        <childnode refid="18511" relation="include">
        </childnode>
      </node>
      <node id="18509">
        <label>server/server_info.hpp</label>
      </node>
      <node id="18496">
        <label>mgm_packet_handler.hpp</label>
        <link refid="mgm__packet__handler_8hpp_source"/>
        <childnode refid="18474" relation="include">
        </childnode>
        <childnode refid="18476" relation="include">
        </childnode>
      </node>
      <node id="18493">
        <label>network/interfaces.hpp</label>
      </node>
      <node id="18483">
        <label>listeners.hpp</label>
        <link refid="listeners_8hpp_source"/>
        <childnode refid="18479" relation="include">
        </childnode>
        <childnode refid="18484" relation="include">
        </childnode>
      </node>
      <node id="18489">
        <label>cstdmf/bw_namespace.hpp</label>
      </node>
      <node id="18497">
        <label>mock_handler.hpp</label>
        <link refid="mock__handler_8hpp_source"/>
        <childnode refid="18498" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18479" relation="include">
        </childnode>
      </node>
      <node id="18485">
        <label>process_binary_version.hpp</label>
        <link refid="process__binary__version_8hpp_source"/>
        <childnode refid="18486" relation="include">
        </childnode>
      </node>
      <node id="18488">
        <label>message_with_destination.hpp</label>
        <link refid="message__with__destination_8hpp_source"/>
        <childnode refid="18474" relation="include">
        </childnode>
        <childnode refid="18479" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
      </node>
      <node id="18492">
        <label>cstdmf/bw_vector.hpp</label>
      </node>
      <node id="18484">
        <label>server_platform.hpp</label>
        <link refid="server__platform_8hpp_source"/>
        <childnode refid="18485" relation="include">
        </childnode>
        <childnode refid="18487" relation="include">
        </childnode>
        <childnode refid="18488" relation="include">
        </childnode>
        <childnode refid="18489" relation="include">
        </childnode>
        <childnode refid="18486" relation="include">
        </childnode>
        <childnode refid="18490" relation="include">
        </childnode>
        <childnode refid="18491" relation="include">
        </childnode>
        <childnode refid="18476" relation="include">
        </childnode>
        <childnode refid="18492" relation="include">
        </childnode>
        <childnode refid="18493" relation="include">
        </childnode>
        <childnode refid="18494" relation="include">
        </childnode>
        <childnode refid="18479" relation="include">
        </childnode>
        <childnode refid="18495" relation="include">
        </childnode>
      </node>
      <node id="18502">
        <label>network/event_dispatcher.hpp</label>
      </node>
      <node id="18473">
        <label>broadcast_manager.hpp</label>
        <link refid="broadcast__manager_8hpp_source"/>
        <childnode refid="18474" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18479" relation="include">
        </childnode>
        <childnode refid="18480" relation="include">
        </childnode>
        <childnode refid="18481" relation="include">
        </childnode>
      </node>
      <node id="18472">
        <label>wrapped_message_handler.hpp</label>
        <link refid="wrapped__message__handler_8hpp_source"/>
        <childnode refid="18473" relation="include">
        </childnode>
        <childnode refid="18474" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18479" relation="include">
        </childnode>
        <childnode refid="18481" relation="include">
        </childnode>
      </node>
      <node id="18511">
        <label>memory</label>
      </node>
      <node id="18514">
        <label>ring_cluster.hpp</label>
        <link refid="ring__cluster_8hpp_source"/>
        <childnode refid="18481" relation="include">
        </childnode>
        <childnode refid="18515" relation="include">
        </childnode>
        <childnode refid="18475" relation="include">
        </childnode>
        <childnode refid="18479" relation="include">
        </childnode>
        <childnode refid="18491" relation="include">
        </childnode>
      </node>
    </incdepgraph>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;wrapped_message_handler.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;bwmachined.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;ring_broadcast_manager.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;network/basictypes.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;network/network_utils.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"><ref refid="namespace_b_w___b_e_g_i_n___n_a_m_e_s_p_a_c_e" kindref="compound">BW_BEGIN_NAMESPACE</ref></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"><ref refid="class_wrapped_message_handler_1a3aead9ca75a8f9d7a88873d129419201" kindref="member">WrappedMessageHandler::WrappedMessageHandler</ref>(</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>TimeQueue64::TimeStamp<sp/>timeoutMillis,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint8<sp/>maxAttempts<sp/>):</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/>sortedManagers_(),</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/>managersBySeq_(),</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/>timeoutMillis_(<sp/>timeoutMillis<sp/>),</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/>maxAttempts_(<sp/>maxAttempts<sp/>)</highlight></codeline>
<codeline lineno="25"><highlight class="normal">{</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/>BW_GUARD;</highlight></codeline>
<codeline lineno="27"><highlight class="normal">}</highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><ref refid="class_wrapped_message_handler_1ad071324cfe83591820724a6765e43e97" kindref="member">WrappedMessageHandler::~WrappedMessageHandler</ref>()</highlight></codeline>
<codeline lineno="34"><highlight class="normal">{</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/>BW_GUARD;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/>std::for_each(<sp/>sortedManagers_.begin(),<sp/>sortedManagers_.end(),</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bw_safe_delete&lt;<sp/>BroadcastManager<sp/>*<sp/>&gt;<sp/>);</highlight></codeline>
<codeline lineno="39"><highlight class="normal">}</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_wrapped_message_handler_1a56e3da0813bbdcf6d754c7fee761224d" kindref="member">WrappedMessageHandler::addBroadcastRequest</ref>(</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>BroadcastWrapperMessage<sp/>&amp;<sp/>bwm,<sp/><ref refid="class_b_w_machined" kindref="compound">BWMachined</ref><sp/>&amp;<sp/>machined,</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_smart_pointer" kindref="compound">ConnectionWrapperPtr</ref><sp/>pReplyConnection<sp/>)</highlight></codeline>
<codeline lineno="53"><highlight class="normal">{</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/>BW_GUARD;</highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bwm.hasError())</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ERROR_MSG(<sp/></highlight><highlight class="stringliteral">&quot;WrappedMessageHandler::addBroadcastRequest:<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Discarding<sp/>corrupt<sp/>BroadcastWrapperMessage.\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(bwm.wrappedPacket()<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Not<sp/>strictly<sp/>an<sp/>error,<sp/>but<sp/>nothing<sp/>to<sp/>send<sp/>out,<sp/>so<sp/>reply<sp/>immediately</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>WARNING_MSG(<sp/></highlight><highlight class="stringliteral">&quot;WrappedMessageHandler::addBroadcastRequest:<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Received<sp/>empty<sp/>BroadcastWrapperMessage.\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ManagerLookup<sp/>tempLookup;</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_broadcast_manager" kindref="compound">BroadcastManager</ref><sp/>*<sp/>pTempManager<sp/>=<sp/>machined.<ref refid="class_b_w_machined_1a647bf4134f73b09a44f4100a0507bf73" kindref="member">createBroadcastManager</ref>(<sp/>bwm,</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pReplyConnection,<sp/>tempLookup<sp/>);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pTempManager-&gt;<ref refid="class_broadcast_manager_1a3c05b9edf69329b77a54f09a7c0c2634" kindref="member">sendResponse</ref>();</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>pTempManager;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_broadcast_manager" kindref="compound">BroadcastManager</ref><sp/>*<sp/>pManager<sp/>=<sp/>machined.<ref refid="class_b_w_machined_1a647bf4134f73b09a44f4100a0507bf73" kindref="member">createBroadcastManager</ref>(<sp/>bwm,</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pReplyConnection,<sp/>managersBySeq_<sp/>);</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pManager-&gt;<ref refid="class_broadcast_manager_1ae57e223218c240dcecdf431796f47986" kindref="member">hasPacket</ref>())</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Something<sp/>went<sp/>wrong<sp/>that<sp/>prevented<sp/>it<sp/>from<sp/>instantiating<sp/>correctly</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ERROR_MSG(<sp/></highlight><highlight class="stringliteral">&quot;WrappedMessageHandler::addBroadcastRequest:<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>initiate<sp/>broadcast.\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bw_safe_delete(<sp/>pManager<sp/>);</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>sortedManagers_.insert(<sp/>sortedManagers_.end(),<sp/>pManager<sp/>);</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pManager-&gt;<ref refid="class_broadcast_manager_1af638da1cefff403501e41e23155ff310" kindref="member">sendBroadcast</ref>();</highlight></codeline>
<codeline lineno="91"><highlight class="normal">}</highlight></codeline>
<codeline lineno="92"><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_wrapped_message_handler_1a4cd6d99a09478fc57991842bad7f7464" kindref="member">WrappedMessageHandler::interceptPacket</ref>(<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>MGMPacket<sp/>&amp;<sp/>packet,</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>uint32<sp/>ipAddress<sp/>)</highlight></codeline>
<codeline lineno="108"><highlight class="normal">{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/>BW_GUARD;</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>MGMPacket::MGMs::const_iterator<sp/>msgIter<sp/>=<sp/>packet.messages_.begin();</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(msgIter<sp/>!=<sp/>packet.messages_.end())</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ManagerLookup::iterator<sp/>found<sp/>=<sp/>managersBySeq_.find(</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(*msgIter)-&gt;seq()<sp/>);</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(found<sp/>!=<sp/>managersBySeq_.end())</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_broadcast_manager" kindref="compound">BroadcastManager</ref><sp/>*<sp/>manager<sp/>=<sp/>found-&gt;second;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!manager-&gt;<ref refid="class_broadcast_manager_1ae47843f900b292e63df8ce50021c5397" kindref="member">addResponse</ref>(<sp/>packet,<sp/>ipAddress<sp/>))</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ERROR_MSG(<sp/></highlight><highlight class="stringliteral">&quot;WrappedMessageHandler::interceptPacket:<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;Unable<sp/>to<sp/>add<sp/>response.\n&quot;</highlight><highlight class="normal"><sp/>);</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Doesn&apos;t<sp/>matter<sp/>whether<sp/>it<sp/>succeeded<sp/>or<sp/>not<sp/>-<sp/>if<sp/>seq<sp/>matches,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>it&apos;s<sp/>not<sp/>intended<sp/>for<sp/>anybody<sp/>else<sp/>anyway.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++msgIter;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="137"><highlight class="normal">}</highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_wrapped_message_handler_1a396b61d19aa572b4992813af02fcdb16" kindref="member">WrappedMessageHandler::process</ref>()</highlight></codeline>
<codeline lineno="146"><highlight class="normal">{</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/>BW_GUARD;</highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/>SortedManagers::iterator<sp/>iter<sp/>=<sp/>sortedManagers_.begin();</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>entries<sp/>=<sp/>sortedManagers_.size();</highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>entries;<sp/>++i)</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="class_broadcast_manager" kindref="compound">BroadcastManager</ref><sp/>*<sp/>manager<sp/>=<sp/>*iter;</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(manager-&gt;<ref refid="class_broadcast_manager_1a8aa6117e2e9ee6cd899f7c97f056c9e3" kindref="member">isComplete</ref>())</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Will<sp/>already<sp/>have<sp/>sent<sp/>its<sp/>reply<sp/>and<sp/>cleaned<sp/>up,<sp/>so<sp/>just<sp/>delete</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bw_safe_delete(<sp/>manager<sp/>);</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>iter<sp/>=<sp/>sortedManagers_.erase(<sp/>iter<sp/>);</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(manager-&gt;<ref refid="class_broadcast_manager_1a23d748c1034c821e27cbbf48745f3366" kindref="member">hasTimedOut</ref>(<sp/>timeoutMillis_<sp/>))</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(manager-&gt;<ref refid="class_broadcast_manager_1a6f72534a0b75695acb2023eede7c1068" kindref="member">sendAttempts</ref>()<sp/>&gt;=<sp/>maxAttempts_)</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Give<sp/>up<sp/>and<sp/>send<sp/>back<sp/>what<sp/>we<sp/>have</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>manager-&gt;<ref refid="class_broadcast_manager_1a3c05b9edf69329b77a54f09a7c0c2634" kindref="member">sendResponse</ref>();</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bw_safe_delete(<sp/>manager<sp/>);</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>iter<sp/>=<sp/>sortedManagers_.erase(<sp/>iter<sp/>);</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Retry,<sp/>and<sp/>push<sp/>to<sp/>the<sp/>back<sp/>after<sp/>the<sp/>loop</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>manager-&gt;<ref refid="class_broadcast_manager_1af638da1cefff403501e41e23155ff310" kindref="member">sendBroadcast</ref>();</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++iter;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="comment">//<sp/>Incomplete<sp/>and<sp/>not<sp/>yet<sp/>timed<sp/>out,<sp/>need<sp/>to<sp/>keep<sp/>this<sp/>one<sp/>onwards</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(iter<sp/>!=<sp/>sortedManagers_.begin()<sp/>&amp;&amp;<sp/>iter<sp/>!=<sp/>sortedManagers_.end())</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Everything<sp/>before<sp/>iter<sp/>has<sp/>retried<sp/>and<sp/>needs<sp/>to<sp/>go<sp/>at<sp/>the<sp/>back</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sortedManagers_.splice(<sp/>sortedManagers_.end(),<sp/>sortedManagers_,</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sortedManagers_.begin(),<sp/>iter<sp/>);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/>entries<sp/>=<sp/>sortedManagers_.size();</highlight></codeline>
<codeline lineno="190"><highlight class="normal">}</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal">BW_END_NAMESPACE</highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight><highlight class="comment">//<sp/>wrapped_message_handler.cpp</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="tools/bwmachined/wrapped_message_handler.cpp"/>
  </compounddef>
</doxygen>
