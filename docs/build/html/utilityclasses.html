

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Utility Classes &mdash; Asset Pipeline  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="Asset Pipeline  documentation" href="index.html"/>
        <link rel="next" title="Extending the Asset Pipeline" href="extendingassetpipeline.html"/>
        <link rel="prev" title="JIT Compiler" href="jitcompiler.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Asset Pipeline
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Asset Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="batchcompiler.html">Batch Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="testcompiler.html">TestCompiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="jitcompiler.html">JIT Compiler</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Utility Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#assetserver">AssetServer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#assetclient">AssetClient</a></li>
<li class="toctree-l3"><a class="reference internal" href="#assetlock">AssetLock</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="extendingassetpipeline.html">Extending the Asset Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="assetrules.html">Asset Rules</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Asset Pipeline</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Utility Classes</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/utilityclasses.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utility-classes">
<h1>Utility Classes<a class="headerlink" href="#utility-classes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#assetserver" id="id1">AssetServer</a><ul>
<li><a class="reference internal" href="#assetclient" id="id2">AssetClient</a></li>
<li><a class="reference internal" href="#assetlock" id="id3">AssetLock</a></li>
</ul>
</li>
</ul>
</div>
<p>The asset_pipeline module provides a number of utility classes for
creating asset servers and asset clients, and handling connections
between them.</p>
<div class="section" id="assetserver">
<h2><a class="toc-backref" href="#id1">AssetServer</a><a class="headerlink" href="#assetserver" title="Permalink to this headline">¶</a></h2>
<p>An asset server is an application that can accept requests to convert
assets from multiple connections. To implement an asset server, derive
from the AssetServer class. The base class implementation of the
AssetServer handles creating a Windows Named Pipe, and listening for
connections from multiple clients. It also ensures that no two asset
servers are operating over the same resource paths, system wide.</p>
<p>When creating an asset server, you must implement functionality to
handle requests for assets. To do so, override the following function on
AssetServer:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>virtual void onAssetRequested( const StringRef &amp; asset )
</pre></div>
</div>
<p>The asset parameter will contain the resource-relative path of an asset
that has been requested by a connected client.</p>
<p>Once your asset server has finished processing the request, you will
need to call the following function on AssetServer:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>void broadcastAsset( const StringRef &amp; asset )
</pre></div>
</div>
<p>This function communicates to all connected clients that the asset
server has finished processing the requested asset.</p>
<div class="section" id="assetclient">
<h3><a class="toc-backref" href="#id2">AssetClient</a><a class="headerlink" href="#assetclient" title="Permalink to this headline">¶</a></h3>
<p>An asset client is an application that can connect to an asset server
and request assets for conversion. When an asset server receives an
asset request it will push the required asset to the front of its
conversion queue.</p>
<p>To implement an asset client, create an instance of the AssetClient
class within your application. The AssetClient class automatically
handles connecting to an asset server. If an executing asset server
cannot be found, the AssetClient class tries to start the default asset
server. The default asset server is defined in
<code class="docutils literal"><span class="pre">game/res/bigworld/resources.xml</span></code> under the tag <code class="docutils literal"><span class="pre">&lt;assetServer&gt;</span></code>.</p>
<p>To request an asset from an asset client, call the following function on
AssetClient:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>void requestAsset( const StringRef &amp; asset, bool wait )
</pre></div>
</div>
<p>The asset parameter specifies the resource-relative path of the asset to
process. If the wait parameter is set to true, this function will only
return once the connected asset server has finished processing the
asset, otherwise the function will return immediately. In both cases,
the asset client cannot assume that a requested asset has been
successfully processed. It is possible for an asset server to receive a
request for an asset that it cannot process, or that contains an error.
As such, it is the responsibility of the asset client to verify the
contents of an asset.</p>
</div>
<div class="section" id="assetlock">
<h3><a class="toc-backref" href="#id3">AssetLock</a><a class="headerlink" href="#assetlock" title="Permalink to this headline">¶</a></h3>
<p>The implementation of the asset server provided with BWT is known as the
JIT Compiler. The JIT Compiler automatically detects and processes
changes to assets on disk. This can sometimes lead to undesirable
behaviour where the JIT Compiler starts processing an asset that is
still being edited. To overcome this issue, use the AssetLock class.</p>
<p>The AssetLock class can be used to prevent the JIT Compiler from
processing any assets or responding to file modifications. It does not
stop the JIT Compiler from scanning the disk, searching for assets that
have been modified. Assets modified while the JIT Compiler is locked
will be processed when the lock is released.</p>
<p>To lock the JIT Compiler, simply create an instance of the AssetLock
class. The constructor of the AssetLock will only return once the JIT
Compiler has been successfully locked. AssetLock instances can be
created across multiple threads and processes. After all instances of
the AssetLock are destroyed, or all processes with active AssetLocks are
terminated, the lock on the JIT Compiler will be released.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="extendingassetpipeline.html" class="btn btn-neutral float-right" title="Extending the Asset Pipeline" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="jitcompiler.html" class="btn btn-neutral" title="JIT Compiler" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Wargaming Sydney.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>